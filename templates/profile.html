    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Wander - Your Ultimate Travel Companion</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
        <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
        <link rel="stylesheet" href="static/css/profile.css">
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" height="30">
                    <span class="ml-2">WANDER</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="/recommendations">Recommendations</a></li>
                        <li class="nav-item"><a class="nav-link active" href="/profile">Profile</a></li>
                        <li class="nav-item"><a class="nav-link" href="/preferences">Preferences</a></li>
                        <li class="nav-item"><a class="nav-link" href="/reviews">Reviews</a></li>
                    </ul>
                </div>
                <div class="navbar-nav">
                    <button class="btn btn-outline-light btn-sm me-2">TRY APP</button>
                    <div class="profile-container">
                        <div class="profile-icon" id="profileIcon" tabindex="0">
                            <img src="{{ url_for('static', filename='images/user.png') }}" alt="User Profile" class="user-icon">
                            <span class="badge-notification">3</span>
                        </div>
                        <div class="profile-menu" id="profileMenu">
                            <div class="user-info">
                                <img src="{{ url_for('static', filename='images/user-avatar.png') }}" alt="{{ user.username }}" class="profile-pic">
                                <p class="user-name">{{ user.username }}</p>
                                <p class="user-email">{{ user.email }}</p>
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small class="text-white-50 mt-2">70% profile complete</small>
                            </div>
                            <div class="menu-section">
                                <a href="#edit-profile" class="menu-item"><i class="fas fa-user-edit"></i> Edit Profile</a>
                                <a href="#change-password" class="menu-item"><i class="fas fa-key"></i> Change Password</a>
                                <a href="#notification-settings" class="menu-item"><i class="fas fa-bell"></i> Notification Settings <span class="badge bg-danger ms-2">2</span></a>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="menu-section">
                                <a href="#subscription-plan" class="menu-item"><i class="fas fa-crown"></i> Subscription Plan</a>
                                <a href="#billing-history" class="menu-item"><i class="fas fa-file-invoice-dollar"></i> Billing History</a>
                                <a href="#payment-methods" class="menu-item"><i class="fas fa-credit-card"></i> Payment Methods</a>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="menu-section">
                                <a href="#help-center" class="menu-item"><i class="fas fa-question-circle"></i> Help Center</a>
                                <a href="#contact-support" class="menu-item"><i class="fas fa-headset"></i> Contact Support</a>
                                <a href="#" class="menu-item" id="darkModeToggle"><i class="fas fa-moon"></i> Dark Mode</a>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="menu-section">
                                <a href="/logout" class="menu-item logout"><i class="fas fa-sign-out-alt"></i> Log Out</a>
                            </div>
                        </div>
                    </div>
                </div>
        </nav>

        <header class="hero text-light">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-6" data-aos="fade-right" data-aos-duration="1000">
                        <h1 class="display-4 mb-4">Welcome, {{ user.username }}</h1>
                        <p class="lead mb-4">Embark on extraordinary journeys and create unforgettable memories!</p>
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-map-marked-alt text-primary me-2"></i>
                            <span>Your Personal Travel Curator</span>
                        </div>
                        <div class="d-flex align-items-center mb-3">
                            <i class="fas fa-star text-warning me-2"></i>
                            <span>5.0</span>
                            <span class="ms-3"><i class="fas fa-comment-alt text-info me-2"></i>EXCEPTIONAL USER REVIEWS</span>
                        </div>
                        <button class="btn btn-custom btn-lg mt-3">Begin Your Adventure</button>
                    </div>
                    <div class="col-lg-6 mt-4 mt-lg-0" data-aos="fade-left" data-aos-duration="1000">
                        <div class="card shadow-lg">
                            <img src="{{ url_for('static', filename='images/sample_travel.jpg') }}" alt="sample_travel" class="card-img-top">
                            <div class="card-body">
                            <div class="card-body-1">
                                <h5 class="card-title">Discover New Horizons</h5>
                                <h3 class="card-text mb-4">Unleash Your Inner Explorer</h3></div>
                                <button class="btn btn-outline-primary btn-lg">Uncover Hidden Gems</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- New User Dashboard Section -->
        <section class="user-dashboard">
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <div class="text-center">
                            <img src="{{ url_for('static', filename='images/user-avatar.png') }}" alt="User Avatar" class="user-avatar mb-3">
                            <h3>Welcome back, {{ user.username }}!</h3>
                            <p>Travel Enthusiast Level</p>
                            <div class="progress mb-3">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <p>75% to next level</p>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <h4>Your Upcoming Trips</h4>
                        <div class="trip-card p-3 mb-3 bg-white">
                            <h5>Paris, France</h5>
                            <p>Departure: August 26, 2024</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span>3 days left</span>
                                <button class="btn btn-sm btn-outline-primary">View Details</button>
                            </div>
                        </div>
                        <div class="trip-card p-3 mb-3 bg-white">
                            <h5>Tokyo, Japan</h5>
                            <p>Departure: September 10, 2024</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span>19 days left</span>
                                <button class="btn btn-sm btn-outline-primary">View Details</button>
                            </div>
                        </div>
                        <button class="btn btn-primary">Plan a New Trip</button>
                    </div>
                </div>
            </div>
        </section>

        <section class="features py-5">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 mb-4" data-aos="flip-left" data-aos-duration="1000">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-hotel fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">Luxurious Accommodations</h5>
                                <div class="badge bg-warning text-dark font-weight-bold">5-STAR EXPERIENCE</div>
                                <h1 class="card-text display-4 font-weight-bold mt-4">700+</h1>
                                <a href="#" class="btn btn-outline-primary btn-lg mt-4">Explore Havens</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4" data-aos="flip-up" data-aos-duration="1000" data-aos-delay="200">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-plane fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">Seamless Flights</h5>
                                <p class="mt-4">Effortless air travel experiences</p>
                                <a href="#" class="btn btn-outline-primary btn-lg mt-4">Traveler Insights</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4" data-aos="flip-right" data-aos-duration="1000" data-aos-delay="400">
                        <div class="card h-100">
                            <div class="card-body text-center">
                                <i class="fas fa-globe-americas fa-3x text-primary mb-3"></i>
                                <h5 class="card-title">2023 Travel Highlights</h5>
                                <ul class="list-group list-group-flush mt-4">
                                    <li class="list-group-item">- Boutique Hotels & Apartments</li>
                                    <li class="list-group-item">- Authentic Local Cuisines</li>
                                    <li class="list-group-item">- Off-the-beaten-path Destinations</li>
                                </ul>
                                <div class="badge bg-info text-white font-weight-bold mt-4">1K+ Curated Experiences</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="parallax-section py-5" style="background-image: url('path/to/parallax-bg.jpg');">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 offset-md-2 text-center text-light">
                    <div class="card-body-1">
                        <h2 class="mb-4" data-aos="zoom-in" data-aos-duration="1000">Discover the World with Wander</h2>
                        <p class="lead" data-aos="zoom-in" data-aos-duration="1000" data-aos-delay="200">From bustling cities to serene beaches, we've got your perfect destination covered.</p>
                        <a href="#" class="btn btn-light btn-lg mt-4" data-aos="zoom-in" data-aos-duration="1000" data-aos-delay="400">Explore Destinations</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="preferences text-light py-5">
            <div class="container">
                <h2 class="text-center mb-4" data-aos="fade-up" data-aos-duration="1000">Your Travel Preferences</h2>
                <div class="row">
                    <div class="col-md-6 offset-md-3" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
                        <div class="card bg-white text-dark">
                            <div class="card-body">
                                <h5 class="card-title">Budget Range: {{ user.preferences.budget if user.preferences else 'Not specified' }}</h5>
                                <h5 class="card-title">Travel Group: {{ user.preferences.travel_companions if user.preferences else 'Not specified' }}</h5>
                                <h5 class="card-title">Culinary Interests: {{ user.preferences.cuisine.split(',') | join(', ') if user.preferences else 'Not specified' }}</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="testimonials py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-5" data-aos="fade-up" data-aos-duration="1000">What Our Travelers Say</h2>
                <div class="row">
                    <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
                        <div class="card h-100">
                            <div class="card-body">
                                <p class="card-text">"Wander made our family trip to Europe unforgettable. The personalized recommendations were spot on!"</p>
                                <footer class="blockquote-footer mt-3">John D., Family Traveler</footer>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
                        <div class="card h-100">
                            <div class="card-body">
                                <p class="card-text">"As a solo traveler, I felt safe and excited with Wander's off-the-beaten-path suggestions. Can't wait for my next adventure!"</p>
                                <footer class="blockquote-footer mt-3">Sarah M., Solo Explorer</footer>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="600">
                        <div class="card h-100">
                            <div class="card-body">
                                <p class="card-text">"The curated local experiences Wander suggested truly immersed us in the culture. It was beyond our expectations!"</p>
                                <footer class="blockquote-footer mt-3">Mike & Lisa, Culture Enthusiasts</footer>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="cta parallax-section py-5" style="background-image: url('path/to/cta-bg.jpg');">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 offset-md-2 text-center text-light">
                    <div class="card-body-1">
                        <h2 class="mb-4" data-aos="zoom-in" data-aos-duration="1000">Ready to Start Your Journey?</h2>
                        <p class="lead mb-4" data-aos="zoom-in" data-aos-duration="1000" data-aos-delay="200">Let Wander be your guide to extraordinary adventures and unforgettable memories.</p>
                        </div>
                        <a href="#" class="btn btn-primary btn-lg" data-aos="zoom-in" data-aos-duration="1000" data-aos-delay="400">Plan Your Trip Now</a>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer py-5">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-duration="1000">
                        <h4 class="text-uppercase mb-4">About Wander</h4>
                        <p class="lead mb-3">Your ultimate travel companion for exploring the world.</p>
                        <p>Discover new horizons, create unforgettable memories, and embark on extraordinary journeys with Wander.</p>
                        <button class="btn btn-outline-light mt-3">Learn More</button>
                    </div>
                    <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
                        <div class="quick"><h4 class="text-uppercase mb-4">Quick Links</h4>
                        <ul class="list-unstyled footer-links">
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Home</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Destinations</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Services</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Contact</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Blog</a></li>
                            <li><a href="#"><i class="fas fa-chevron-right me-2"></i>Privacy Policy</a></li>
                        </ul></div>
                    </div>
                    <div class="col-lg-4 mb-4" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
                        <h4 class="text-uppercase mb-4">Stay Connected</h4>
                        <p class="lead mb-3">Follow us on social media for travel inspiration and updates.</p>
                        <div class="social-icons mb-4">
                            <a href="#"><i class="fab fa-facebook fa-2x"></i></a>
                            <a href="#"><i class="fab fa-twitter fa-2x"></i></a>
                            <a href="#"><i class="fab fa-instagram fa-2x"></i></a>
                            <a href="#"><i class="fab fa-pinterest fa-2x"></i></a>
                            <a href="#"><i class="fab fa-youtube fa-2x"></i></a>
                        </div>
                        <h5 class="mb-3">Subscribe to Our Newsletter</h5>
                        <form class="form-inline">
                            <div class="input-group">
                                <input type="email" class="form-control" placeholder="Enter your email" aria-label="Enter your email" aria-describedby="button-addon2">
                                <button class="btn btn-subscribe" type="button" id="button-addon2">Subscribe</button>
                            </div>
                        </form>
                    </div>
                </div>
                <hr class="bg-light my-4">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        <p class="mb-0">&copy; 2023 Wander. All rights reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item"><a href="#">Terms of Use</a></li>
                            <li class="list-inline-item">·</li>
                            <li class="list-inline-item"><a href="#">Privacy Policy</a></li>
                            <li class="list-inline-item">·</li>
                            <li class="list-inline-item"><a href="#">Sitemap</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <a href="#" class="back-to-top"><i class="fas fa-chevron-up"></i></a>
        </footer>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/gsap@3.11.4/dist/gsap.min.js"></script>
        <script src=static/js/profile.js></script>
        <script>
                    // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            mirror: false
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
                navbar.style.backgroundColor = 'rgba(44, 62, 80, 1)';
            } else {
                navbar.classList.remove('scrolled');
                navbar.style.backgroundColor = 'rgba(44, 62, 80, 0.95)';
            }
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Parallax effect for hero section
        window.addEventListener('scroll', () => {
            const hero = document.querySelector('.hero');
            const scrollPosition = window.pageYOffset;
            hero.style.backgroundPositionY = scrollPosition * 0.7 + 'px';
        });

        // Lazy loading images
        document.addEventListener("DOMContentLoaded", function() {
            var lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));

            if ("IntersectionObserver" in window) {
                let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            let lazyImage = entry.target;
                            lazyImage.src = lazyImage.dataset.src;
                            lazyImage.classList.remove("lazy");
                            lazyImageObserver.unobserve(lazyImage);
                        }
                    });
                });

                lazyImages.forEach(function(lazyImage) {
                    lazyImageObserver.observe(lazyImage);
                });
            }
        });

         // New JavaScript code for the advanced profile dropdown
         document.addEventListener('DOMContentLoaded', function() {
            const profileIcon = document.getElementById('profileIcon');
            const profileMenu = document.getElementById('profileMenu');
            const darkModeToggle = document.getElementById('darkModeToggle');
            let isDarkMode = false;

            function toggleMenu() {
                profileMenu.classList.toggle('show');
                if (profileMenu.classList.contains('show')) {
                    profileIcon.classList.add('pulse');
                    animateMenuItems();
                    adjustMenuPosition();
                } else {
                    profileIcon.classList.remove('pulse');
                }
            }

            function animateMenuItems() {
                const menuItems = document.querySelectorAll('.menu-item');
                gsap.fromTo(menuItems, 
                    {opacity: 0, x: 20},
                    {opacity: 1, x: 0, duration: 0.5, stagger: 0.1, ease: "power2.out"}
                );
            }

            const popperInstance = Popper.createPopper(profileIcon, profileMenu, {
                placement: 'bottom-end',
                modifiers: [
                    {
                        name: 'offset',
                        options: {
                            offset: [0, 10],
                        },
                    },
                ],
            });

            profileIcon.addEventListener('click', function(event) {
                event.stopPropagation();
                toggleMenu();
                popperInstance.update();
            });

            document.addEventListener('click', function(event) {
                if (!profileMenu.contains(event.target) && !profileIcon.contains(event.target)) {
                    profileMenu.classList.remove('show');
                    profileIcon.classList.remove('pulse');
                }
            });

            // Keyboard accessibility
            profileIcon.addEventListener('keydown', function(event) {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    toggleMenu();
                    popperInstance.update();
                }
            });

            profileMenu.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    profileMenu.classList.remove('show');
                    profileIcon.classList.remove('pulse');
                    profileIcon.focus();
                }
            });

            // Focus trap
            const focusableElements = profileMenu.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])');
            const firstFocusableElement = focusableElements[0];
            const lastFocusableElement = focusableElements[focusableElements.length - 1];

            profileMenu.addEventListener('keydown', function(event) {
                if (event.key === 'Tab') {
                    if (event.shiftKey) {
                        if (document.activeElement === firstFocusableElement) {
                            event.preventDefault();
                            lastFocusableElement.focus();
                        }
                    } else {
                        if (document.activeElement === lastFocusableElement) {
                            event.preventDefault();
                            firstFocusableElement.focus();
                        }
                    }
                }
            });

            // Hover effect for menu items
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                item.addEventListener('mouseenter', () => {
                    gsap.to(item, {x: 5, duration: 0.2, ease: "power2.out"});
                });
                item.addEventListener('mouseleave', () => {
                    gsap.to(item, {x: 0, duration: 0.2, ease: "power2.out"});
                });
            });

            // Dark mode toggle
            darkModeToggle.addEventListener('click', function(event) {
                event.preventDefault();
                isDarkMode = !isDarkMode;
                document.body.classList.toggle('dark-mode');
                this.innerHTML = isDarkMode ? '<i class="fas fa-sun"></i> Light Mode' : '<i class="fas fa-moon"></i> Dark Mode';
            });
        });

function adjustMenuPosition() {
    const menuRect = profileMenu.getBoundingClientRect();
    const viewportHeight = window.innerHeight;

    if (menuRect.bottom > viewportHeight) {
        const overflowY = menuRect.bottom - viewportHeight;
        profileMenu.style.top = `calc(100% - ${overflowY}px)`;
    } else {
        profileMenu.style.top = '100%';
    }
}
 // Initialize AOS
 AOS.init();

// Back to top button
const backToTopButton = document.querySelector('.back-to-top');

window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
        backToTopButton.style.display = 'block';
    } else {
        backToTopButton.style.display = 'none';
    }
});

backToTopButton.addEventListener('click', (e) => {
    e.preventDefault();
    window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Newsletter subscription
const subscribeButton = document.getElementById('button-addon2');
const emailInput = document.querySelector('.form-control');

subscribeButton.addEventListener('click', () => {
    if (emailInput.value.trim() !== '' && isValidEmail(emailInput.value)) {
        alert('Thank you for subscribing!');
        emailInput.value = '';
    } else {
        alert('Please enter a valid email address.');
    }
});

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

// Smooth scroll for footer links
document.querySelectorAll('.footer-links a').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
        });
    });
});
            <script>
    </body>
    </html>